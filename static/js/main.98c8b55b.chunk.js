(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{43:function(t,e,c){},44:function(t,e,c){},45:function(t,e,c){},46:function(t,e,c){"use strict";c.r(e);var o=c(0),n=c(22),a=c.n(n),s=c(23),d=c(4),j=c(8),i=c(1);function l(t){var e=t.projectName,c=t.description,o=t.id,n=t.columns,a=Object(d.l)();return Object(i.jsxs)("div",{onClick:function(t){a("/todo-app/todos/".concat(o),{state:{id:o,projectName:e,description:c,columns:n}})},children:[Object(i.jsx)("h2",{children:e}),Object(i.jsx)("p",{children:c})]})}function b(){var t=Object(j.c)((function(t){return t.todos.projects})),e=Object(j.c)((function(t){return t.todos.projects.allIds}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Projects"}),e.map((function(e){var c=t.byId[e];return Object(i.jsx)(l,{description:c.description,id:c.id,columns:c.columns})}))]})}var r=c(5),u="TODOS/ADD_TODO",O="TODOS/EDIT_TODO",m="TODOS/CHANGE_TODO_COLUMN",f="TODOS/REMOVE_TODO",h="TODOS/SEARCH",p="TODOS/ADD_COMMENT";var x=c(25);function I(t){var e=t.showModal,c=t.todoId,n=t.commentId,a=Object(j.b)(),s=Object(o.useState)(""),d=Object(r.a)(s,2),l=d[0],b=d[1],u=Object(o.useState)(""),O=Object(r.a)(u,2),m=O[0],f=O[1];Object(o.useEffect)((function(){f(Object(x.a)())}),[]);return Object(i.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),t.target.reset(),e(!1),a(function(t,e,c,o){return{type:p,string:t,id:e,todoId:c,commentId:o}}(l,m,c,n))},children:[Object(i.jsx)("label",{children:Object(i.jsx)("input",{className:"form__input",placeholder:"Comment",onChange:function(t){b(t.target.value)},value:l})}),Object(i.jsx)("input",{type:"submit"})]})}function v(t){var e=t.columnId,c=t.showModal,n=t.oldTodo,a=t.columnsIds,s=Object(j.c)((function(t){return t.todos.todos.lastIndex})),d=Object(j.b)(),l=Object(o.useState)(""),b=Object(r.a)(l,2),f=b[0],h=b[1],p=Object(o.useState)(""),I=Object(r.a)(p,2),v=(I[0],I[1]),y=Object(o.useState)(""),g=Object(r.a)(y,2),S=g[0],N=g[1],C=Object(o.useState)(""),_=Object(r.a)(C,2),D=_[0],T=_[1],k=Object(o.useState)(""),w=Object(r.a)(k,2),A=(w[0],w[1]),E=Object(o.useState)(""),M=Object(r.a)(E,2),J=M[0],F=M[1],L=Object(o.useState)(""),R=Object(r.a)(L,2),q=(R[0],R[1]),H=Object(o.useState)(""),P=Object(r.a)(H,2),Q=(P[0],P[1]),B=Object(o.useState)([]),G=Object(r.a)(B,2),U=(G[0],G[1]),V=Object(o.useState)(""),W=Object(r.a)(V,2),Y=W[0],z=W[1],K=Object(o.useState)([]),X=Object(r.a)(K,2),Z=(X[0],X[1]),$=Object(o.useState)([]),tt=Object(r.a)($,2),et=(tt[0],tt[1]);console.log(s),Object(o.useEffect)((function(){n?(N(n.title),T(n.description),A(n.date),F(n.timeTaken),q(n.finalDate),Q(n.priority),U(n.attachedFiles),z(n.status),Z(n.subTodos),et(n.comments),h(n.id),v(n.number)):(h(Object(x.a)()),z(e))}),[]);var ct={id:f,title:S,number:s,comments:[],status:Y};return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),t.target.reset(),c(!1),d(n?function(t,e,c){return{type:O,payload:{id:t,todo:e,columnId:c}}}(f,ct,Y):function(t,e,c){return{type:u,payload:{id:t,todo:e,columnId:c}}}(f,ct,Y))},children:[Object(i.jsx)("label",{children:Object(i.jsx)("input",{className:"form__input",placeholder:"Title",onChange:function(t){N(t.target.value)},value:S})}),Object(i.jsx)("label",{children:Object(i.jsx)("input",{className:"form__input",placeholder:"Description",onChange:function(t){T(t.target.value)},value:D})}),Object(i.jsx)("label",{children:Object(i.jsx)("input",{className:"form__input",placeholder:"Time taken",onChange:function(t){F(t.target.value)},value:J})}),Object(i.jsx)("label",{children:Object(i.jsx)("input",{className:"form__input",placeholder:"Final date",type:"date",onChange:function(t){return console.log(t.target)},value:S})}),Object(i.jsxs)("select",{onChange:function(t){Q(t.target.value)},children:[Object(i.jsx)("option",{value:"",children:"--Choose priority--"}),Object(i.jsx)("option",{value:"high",children:"High"}),Object(i.jsx)("option",{value:"average",children:"Average"}),Object(i.jsx)("option",{value:"low",children:"Low"})]}),Object(i.jsxs)("select",{onChange:function(t){var e=t.target.value;z(e),n&&d(function(t,e,c,o){return{type:m,payload:{id:t,todo:e,columnId:c,nextColumnId:o}}}(f,ct,Y,e))},value:Y,children:[Object(i.jsx)("option",{value:"",children:"--Choose status--"}),Object(i.jsx)("option",{value:a[0],children:"Queue"}),Object(i.jsx)("option",{value:a[1],children:"Development"}),Object(i.jsx)("option",{value:a[2],children:"Done"})]}),Object(i.jsx)("label",{children:Object(i.jsx)("input",{type:"file",onChange:function(t){console.log(t.target.value)}})}),Object(i.jsx)("input",{type:"submit"})]})})}c(43);function y(t){t.type;var e=t.children,c=t.title;function o(){}return Object(i.jsx)("section",{className:"modal",children:Object(i.jsx)("div",{className:"modal__overlay",onClick:o,children:Object(i.jsxs)("div",{className:"modal__container",onClick:function(t){return t.stopPropagation()},children:[Object(i.jsx)("button",{className:"modal__button-close",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e",onClick:o}),Object(i.jsx)("h2",{className:"modal__title",children:c}),e]})})})}function g(t){var e=t.todoId,c=t.comment,n=Object(o.useState)(!1),a=Object(r.a)(n,2),s=a[0],d=a[1];return Object(i.jsxs)("div",{className:"todo__comment",children:[Object(i.jsx)("div",{children:c.text}),Object(i.jsx)("button",{className:"button",onClick:function(){d(!0)},children:"reply"}),Object(i.jsx)(S,{todoId:e,comment:c}),s?Object(i.jsx)(y,{title:"Reply a comment",children:Object(i.jsx)(I,{showModal:d,todoId:e,commentId:c.id})}):""]})}function S(t){var e,c=t.todoId,n=t.comment,a=Object(o.useState)(!0),s=Object(r.a)(a,2),d=s[0],l=s[1],b=Object(j.c)((function(t){return t.todos.comments.postIds})),u=Object(j.c)((function(t){return t.todos.comments.byId}));e=n?n.comments:b,Object(o.useEffect)((function(){n&&l(!d)}),[]);return console.log(e),Object(i.jsxs)(i.Fragment,{children:[n?"":Object(i.jsx)("div",{children:"Comments"}),n&&n.comments?Object(i.jsx)("button",{className:"button",onClick:function(){l(!d)},children:"show replies"}):"",Object(i.jsx)("div",{children:d?e.map((function(t){var e=u[t];return Object(i.jsx)(g,{comment:e,todoId:c})})):""})]})}function N(t){var e=t.todo,c=t.columnId,n=t.columnsIds,a=Object(o.useState)(!1),s=Object(r.a)(a,2),d=s[0],l=s[1],b=Object(o.useState)(!1),u=Object(r.a)(b,2),O=u[0],m=u[1],h=Object(j.b)();return console.log(n),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:e.number}),Object(i.jsx)("div",{children:e.title}),Object(i.jsx)("div",{children:e.description}),Object(i.jsxs)("div",{children:[" ",e.date]}),Object(i.jsxs)("div",{children:[" ",e.timeTaken]}),Object(i.jsxs)("div",{children:[" ",e.finalDate]}),Object(i.jsxs)("div",{children:[" ",e.priority]}),Object(i.jsxs)("div",{children:[" ",e.attachedFiles]}),Object(i.jsxs)("div",{children:[" ",e.status]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{className:"button",onClick:function(){console.log("handleAddComment"),m(!0)},children:"add comment"}),Object(i.jsx)("button",{className:"button",onClick:function(){console.log("handleAddSubtask")},children:"add subtask"})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{className:"button",onClick:function(){console.log("handleDelete"),console.log(e,e.id),h(function(t,e){return{type:f,payload:{id:t,columnId:e}}}(e.id,c))},children:"delete"}),Object(i.jsx)("button",{className:"button",onClick:function(){console.log("handleEdit"),l(!0)},children:"edit"})]})]}),Object(i.jsx)(S,{todoId:e.id}),d?Object(i.jsx)(y,{title:"Edit todo",children:Object(i.jsx)(v,{columnId:c,showModal:l,oldTodo:e,columnsIds:n})}):"",O?Object(i.jsx)(y,{title:"Add a comment",children:Object(i.jsx)(I,{showModal:m,todoId:e.id})}):""]})}function C(){var t=Object(o.useState)(""),e=Object(r.a)(t,2),c=e[0],n=e[1],a=Object(o.useState)("title"),s=Object(r.a)(a,2),d=s[0],l=s[1],b=Object(o.useState)("text"),u=Object(r.a)(b,2),O=u[0],m=u[1],f=Object(o.useState)(""),p=Object(r.a)(f,2),x=p[0],I=p[1],v=Object(j.b)(),y=Object(j.c)((function(t){return t.todos.searchedTodos}));console.log(y);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{children:"Search"}),Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault(),c?v(function(t,e){return{type:h,string:t,queryType:e}}(c,d)):I("Your search query is empty")},children:[Object(i.jsx)("input",{type:O,onChange:function(t){n(t.target.value)},value:c}),Object(i.jsxs)("select",{onChange:function(t){l(t.target.value),"number"===t.target.value?m("number"):m("text")},children:[Object(i.jsx)("option",{value:"title",children:"Search by title"}),Object(i.jsx)("option",{value:"number",children:"Search by number"})]}),Object(i.jsx)("div",{children:x}),Object(i.jsx)("input",{type:"submit"})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Found todos"}),y.map((function(t){return Object(i.jsx)(N,{todo:t})}))]})]})}function _(t){var e=t.title,c=t.id,n=t.todosIds,a=t.columnsIds,s=Object(j.c)((function(t){return t.todos.todos})),d=Object(o.useState)(!1),l=Object(r.a)(d,2),b=l[0],u=l[1];return Object(i.jsxs)("div",{className:"todos__column",children:[Object(i.jsx)("h1",{children:e}),Object(i.jsx)("button",{className:"button",onClick:function(){u(!b)},children:"Add todo"}),Object(i.jsx)("div",{className:"todos__list",children:n.map((function(t){var e=s.byId[t];return Object(i.jsx)(N,{todo:e,columnId:c,showModal:u,columnsIds:a})}))}),b?Object(i.jsx)(y,{title:"Add todo",children:Object(i.jsx)(v,{columnId:c,showModal:u,columnsIds:a})}):""]})}function D(){var t,e,c,o,n=Object(d.j)(),a=Object(d.n)().id,s=Object(j.c)((function(t){return t.todos.projects.byId}))[a];s?(t=s.projectName,e=s.description,c=s.id,o=s.columns):(t=n.state.projectName,e=n.state.description,c=n.state.id,o=n.state.columns),console.log(s);var l=Object(j.c)((function(t){return t.todos.columns}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:t}),Object(i.jsx)("p",{children:e}),Object(i.jsx)(C,{}),Object(i.jsx)("div",{className:"todos",children:o.map((function(t){var e=l.byId[t];return Object(i.jsx)(_,{id:e.id,projectId:c,title:e.columnName,todosIds:e.todos,columnsIds:o})}))})]})}c(44);var T=function(){return Object(i.jsx)(s.a,{children:Object(i.jsxs)(d.c,{children:[Object(i.jsx)(d.a,{path:"/",element:Object(i.jsx)(b,{})}),Object(i.jsx)(d.a,{path:"/todo-app",element:Object(i.jsx)(b,{})}),Object(i.jsx)(d.a,{path:"todo-app/todos/:id",element:Object(i.jsx)(D,{})})]})})},k=c(16),w=c(31),A=c(17),E=c(6),M=c(7),J=c(3),F=JSON.parse(localStorage.getItem("state")),L=F?Object(J.a)({},F):Object(J.a)({},{projects:{byId:{"4f90d13a40":{projectName:"Book App",description:"App for discovering new books and sharing opinin about the books you read",id:"4f90d13a40",columns:["4f90d13a41","4f90d13a42","4f90d13a43"]},"4f90d13a44":{projectName:"Pet Food App",description:"App for ordering pet food and sharing opinion about it",id:"4f90d13a41",columns:["4f90d13a45","4f90d13a46","4f90d13a47"]}},allIds:["4f90d13a40","4f90d13a44"]},columns:{byId:{"4f90d13a41":{id:"4f90d13a41",columnName:"Queue",todos:[]},"4f90d13a42":{id:"4f90d13a42",columnName:"Development",todos:[]},"4f90d13a43":{id:"4f90d13a43",columnName:"Done",todos:[]},"4f90d13a45":{id:"4f90d13a45",columnName:"Queue",todos:[]},"4f90d13a46":{id:"4f90d13a46",columnName:"Development",todos:[]},"4f90d13a47":{id:"4f90d13a47",columnName:"Done",todos:[]}},allIds:["4f90d13a41","4f90d13a42","4f90d13a43","4f90d13a45","4f90d13a46","4f90d13a47"]},todos:{byId:{},allIds:[],lastIndex:1},subtodos:{byId:{},allIds:[]},comments:{byId:{},postIds:[],allIds:[]},searchedTodos:[]}),R=Object(k.combineReducers)({todos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u:var c=JSON.stringify(L),o=(JSON.parse(c),e.payload),n=o.todo,a=o.columnId,s=o.id,d=t.columns.byId,j=Object(J.a)(Object(J.a)({},t),{},{columns:{byId:Object(J.a)(Object(J.a)({},d),{},Object(E.a)({},a,Object(J.a)(Object(J.a)({},d[a]),{},{todos:[].concat(Object(M.a)(d[a].todos),[s])})))},todos:Object(J.a)(Object(J.a)({},t.todos),{},{byId:Object(J.a)(Object(J.a)({},t.todos.byId),{},Object(E.a)({},s,n)),allIds:[].concat(Object(M.a)(t.todos.allIds),[s]),lastIndex:Number(t.todos.lastIndex)+1})});return localStorage.setItem("state",JSON.stringify(j)),Object(J.a)({},j);case O:return function(){var c=e.payload,o=c.todo,n=(c.columnId,c.id),a=Object(J.a)(Object(J.a)({},t),{},{todos:Object(J.a)(Object(J.a)({},t.todos),{},{byId:Object(J.a)(Object(J.a)({},t.todos.byId),{},Object(E.a)({},n,o))})});return localStorage.setItem("state",JSON.stringify(a)),Object(J.a)({},a)}();case m:return function(){var c,o=e.payload,n=o.id,a=o.columnId,s=o.nextColumnId,d=t.columns.byId,j=t.columns.byId[a].todos,i=t.columns.byId[s].todos,l=j.findIndex((function(t){return t===n})),b=[].concat(Object(M.a)(j.slice(0,l)),Object(M.a)(j.slice(l+1))),r=Object(J.a)(Object(J.a)({},t),{},{columns:{byId:Object(J.a)(Object(J.a)({},d),{},(c={},Object(E.a)(c,a,Object(J.a)(Object(J.a)({},d[a]),{},{todos:b})),Object(E.a)(c,s,Object(J.a)(Object(J.a)({},d[s]),{},{todos:[].concat(Object(M.a)(i),[n])})),c))},todos:Object(J.a)(Object(J.a)({},t.todos),{},{byId:Object(J.a)(Object(J.a)({},t.todos.byId),{},Object(E.a)({},n,Object(J.a)(Object(J.a)({},t.todos.byId[n]),{},{status:s})))})});return localStorage.setItem("state",JSON.stringify(r)),Object(J.a)({},r)}();case f:return function(){var c=e.payload,o=c.columnId,n=c.id,a=t.columns.byId,s=t.columns.byId[o].todos,d=t.todos.allIds,j=t.todos.byId,i=(j[n],Object(w.a)(j,[n].map(A.a))),l=d.findIndex((function(t){return t===n})),b=s.findIndex((function(t){return t===n})),r=[].concat(Object(M.a)(s.slice(0,b)),Object(M.a)(s.slice(b+1))),u=[].concat(Object(M.a)(d.slice(0,l)),Object(M.a)(d.slice(l+1))),O=Object(J.a)(Object(J.a)({},t),{},{columns:{byId:Object(J.a)(Object(J.a)({},a),{},Object(E.a)({},o,Object(J.a)(Object(J.a)({},a[o]),{},{todos:r})))},todos:Object(J.a)(Object(J.a)({},t.todos),{},{byId:Object(J.a)({},i),allIds:Object(M.a)(u)})});return localStorage.setItem("state",JSON.stringify(O)),Object(J.a)({},O)}();case h:return function(){var c,o=e.string,n=e.queryType,a=Object(J.a)({},t.todos.byId),s=Object.values(a);return c="title"===n?[s.filter((function(t){if(t.title.toLowerCase().indexOf(o.toLowerCase())>=0||o.length<=0)return t}))]:[s.filter((function(t){if(t.number===Number(o))return t}))],Object(J.a)(Object(J.a)({},t),{},{searchedTodos:c[0]})}();case p:return function(){var c,o,n=e.string,a=e.id,s=e.todoId,d=e.commentId,j={text:n,id:a,comments:[]};d?(console.log(t.comments.byId,d),c=Object(J.a)(Object(J.a)({},t),{},{comments:Object(J.a)(Object(J.a)({},t.comments),{},{byId:Object(J.a)(Object(J.a)({},t.comments.byId),{},(o={},Object(E.a)(o,a,j),Object(E.a)(o,d,Object(J.a)(Object(J.a)({},t.comments.byId[d]),{},{comments:[].concat(Object(M.a)(t.comments.byId[d].comments),[a])})),o)),allIds:[].concat(Object(M.a)(t.comments.allIds),[a])})})):c=Object(J.a)(Object(J.a)({},t),{},{todos:Object(J.a)(Object(J.a)({},t.todos),{},{byId:Object(J.a)(Object(J.a)({},t.todos.byId),{},Object(E.a)({},s,Object(J.a)(Object(J.a)({},t.todos.byId[s]),{},{comments:[].concat(Object(M.a)(t.todos.byId[s].comments),[a])})))}),comments:Object(J.a)(Object(J.a)({},t.comments),{},{byId:Object(J.a)(Object(J.a)({},t.comments.byId),{},Object(E.a)({},a,j)),allIds:[].concat(Object(M.a)(t.comments.allIds),[a]),postIds:[].concat(Object(M.a)(t.comments.allIds),[a])})});return localStorage.setItem("state",JSON.stringify(c)),Object(J.a)({},c)}();default:return t}}}),q=c(32),H=(c(45),Object(k.createStore)(R,Object(q.composeWithDevTools)(Object(k.applyMiddleware)())));a.a.render(Object(i.jsx)(j.a,{store:H,children:Object(i.jsx)(T,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.98c8b55b.chunk.js.map